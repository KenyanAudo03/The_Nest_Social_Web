{% extends 'base.html' %} {% block content %} {% load static %} 
{% load time_filters %}
<link rel="stylesheet" href="{% static 'css/posts/home.css' %}" />
<style>
  .post-media img,
.post-media video {
    width: 100%;
    aspect-ratio: 16/15; 
    object-fit: cover;
    max-height: 500px;
    border-radius: 8px;
    background: #2a2a2a;
}

</style>

<div class="container">
  <div class="left_navigation">
    <div class="new_feeds">
      <h3>New Feeds</h3>
      <div class="section">
        <a href="#" class="menu-item feeds-items"
          ><i class="bx bx-news"></i> Feeds</a
        >
        <a href="#" class="menu-item feeds-items"
          ><i class="bx bx-group"></i> Popular Groups</a
        >
        <a href="#" class="menu-item feeds-items"
          ><i class="bx bx-trending-up"></i> Trending Posts</a
        >
        <a href="#" class="menu-item feeds-items"
          ><i class="bx bx-bookmark"></i> Saved Posts</a
        >
        <a href="#" class="menu-item feeds-items"
          ><i class="bx bx-user-plus"></i> Suggested Account</a
        >
      </div>
    </div>
    <div class="more_pages">
      <h3>More Pages</h3>
      <div class="section">
        <a href="#" class="menu-item more-item"
          ><i class="bx bx-calendar-event"></i> Events</a
        >
        <a href="#" class="menu-item more-item"
          ><i class="bx bx-store"></i> Marketplace</a
        >
        <a href="#" class="menu-item more-item"
          ><i class="bx bx-folder"></i> Resources</a
        >
        <a href="#" class="menu-item more-item"
          ><i class="bx bx-search-alt-2"></i> Lost and Found</a
        >
        <a href="#" class="menu-item more-item"
          ><i class="bx bx-home-alt"></i> Housing & Roommates</a
        >
      </div>
    </div>
    <div class="account_settings">
      <h3>Account Settings</h3>
      <div class="section">
        <a href="#" class="menu-item account-item"
          ><i class="bx bx-user-circle"></i> View Profile</a
        >
        <a href="#" class="menu-item account-item"
          ><i class="bx bx-edit"></i> Edit Profile</a
        >
        <a href="#" class="menu-item account-item"
          ><i class="bx bx-help-circle"></i> Help Center</a
        >
        <a href="#" class="menu-item account-item"
          ><i class="bx bx-moon"></i> Dark Mode</a
        >
      </div>
    </div>
  </div>
  <div class="posts_suggested_profiles">
    <div class="posts_container">
      {% for post in posts %}
      <div class="post">
        <!-- Post Author -->
        <div class="post-header">
          <div class="profile-container">
            {% if post.user.profile_picture %}
            <img
              src="{{ post.user.profile_picture.url }}"
              alt="Profile Picture"
              class="profile-pic"
            />
            {% else %}
            <i class="bx bx-user default-icon"></i>
            {% endif %}
          </div>

          <div class="user-info">
            <div class="full-name">
              {{ post.user.first_name }} {{ post.user.last_name }}
            </div>
            <div class="meta-info">
              <span class="username">@{{ post.user.username }}</span> â€¢
              <span class="time">{{ post.created_at|time_ago }}</span>
            </div>
          </div>
        </div>

        <!-- Post Content -->
        {% if post.content %}
        <p>{{ post.content }}</p>
        {% endif %}

        <!-- Post Media -->
        {% if post.media.all %}
        <div class="post-media media-{{ post.media.count }}">
          {% for media in post.media.all %} {% with media.file.url|lower as file_url %}
          {% if file_url|slice:"-4:" in ".jpg,.png,.gif,.jpeg" or file_url|slice:"-5:" == ".webp" %}
          <img src="{{ media.file.url }}" alt="Post media" />
          {% elif file_url|slice:"-4:" in ".mp4,.mov,.avi,.flv,.wmv" or file_url|slice:"-5:" in ".webm,.mkv" %}
          <video controls>
            <source src="{{ media.file.url }}" type="video/mp4" />
            Your browser does not support the video tag.
          </video>
          {% else %}
          <p>Unsupported file type</p>
          {% endif %} {% endwith %} {% endfor %}
        </div>
        {% endif %}

        <div class="post-stats">
          <div class="views-count">
            <i class="bx bx-poll bx-rotate-270"></i>
            <span>1.2K views</span>
          </div>
        </div>
        <div class="post-actions">
          <button class="action-button">
            <i class="bx bx-heart"></i>
            <span class="action-count">142</span>
          </button>
          <button class="action-button">
            <i class="bx bx-comment"></i>
            <span class="action-count">24</span>
          </button>
          <button class="action-button">
            <i class="bx bx-repost"></i>
            <span class="action-count">12</span>
          </button>
          <button class="action-button">
            <i class="bx bx-share"></i>
          </button>
        </div>
      </div>
      {% empty %}
      <p>No posts available.</p>
      {% endfor %}
    </div>

    <div class="add-post-btn">
      <a href="{% url 'posts:create_post' %}">
        <i class="bx bx-plus"></i>
      </a>
    </div>
  </div>

  <div class="right_navigation">
    <h3>Contacts</h3>
    <p>Chat and friend suggestions here...</p>
  </div>
</div>

{% endblock %}
